<b>Некоторые замечания</b>
1. Возможно стоит сделать id составным: id и external_id и убрать автоинкремент с id
2. Вынести логику работы с кэшом и БД в отдельные классы. Передавать объекты через конструктор. Идеально реализовать бы DI
3. Выяснить почему не передается в сообщении external_id
4. json хорошо было бы заммапить в DTO, например с помощью JSON_Mapper
